<!DOCTYPE html>
<html lang="{{ get_locale() }}">
<head>
    <meta charset="UTF-8">
    <link href="/static/bootstrap.min.css" rel="stylesheet">
    <link href="/static/styles.css" rel="stylesheet">
    <script src="/static/jquery-3.5.1.min.js"></script>
    <script src="/static/bootstrap.bundle.min.js"></script>
    <script src="/static/moment-with-locales.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="none"/>
    {% block head %}{% endblock %}
    <title>{% block title %}{% endblock %}</title>
</head>
<body>
<div class="container">
    {% block header %}{% endblock %}
    {% if messages %}
        <div class="row">
            <div class="col">
                {% for m in messages %}
                    <div class="alert alert-{{ m[0] }} alert-dismissible fade show">
                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                        {{ m[1] }}
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% block content %}{% endblock %}
    <div style="font-weight: normal; text-align: center">
        <hr>
        <p style="font-weight: normal">{{ _("Built by Annika K. & Felix K. - powered by FARMERA") }} - v1.2.0</p>
        <p><a href="{{ url_for('web.set_lang', lang='de') }}">Deutsch</a> -
        <a href="{{ url_for('web.set_lang', lang='en') }}">English</a> -
        <a href="#" data-toggle="modal" data-target="#dps-modal" class="dps-modal-btn">{{ _("Data Privacy Statement") }}</a> -
        <a href="#" data-toggle="modal" data-target="#faq-modal" id="faq-modal-btn">{{ _("FAQ") }}</a> -
        <a href="mailto:{{ config.MAIL_REPLY_TO }}">Support</a></p>
    </div>

    <div class="modal fade" id="dps-modal">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">

                <div class="modal-header">
                    <h2 class="modal-title">{{ _("Data Privacy Statement") }}</h2>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" id="dps-content"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-xmas" data-dismiss="modal">{{ _("Close") }}</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="faq-modal">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">

                <div class="modal-header">
                    <h2 class="modal-title">{{ _("FAQ") }}</h2>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" id="faq-content"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-xmas" data-dismiss="modal">{{ _("Close") }}</button>
                </div>
            </div>
        </div>
    </div>

</div>
<script>
    $(document).ready(function () {
        $(".dps-modal-btn").click(function () {
            let dpsContent = $("#dps-content");
            if (dpsContent.text().length === 0) {
                $.ajax({
                    url: 'get-dps',
                    type: 'get'
                }).done(function (responseData) {
                    dpsContent.html(responseData)
                }).fail(function () {
                    console.log('Request Failed');
                });
            }
        });
        $("#faq-modal-btn").click(function () {
            let faqContent = $("#faq-content");
            if (faqContent.text().length === 0) {
                $.ajax({
                    url: 'get-faq',
                    type: 'get'
                }).done(function (responseData) {
                    faqContent.html(responseData)
                }).fail(function () {
                    console.log('Request Failed');
                });
            }
        });
    })
</script>
</body>
</html>